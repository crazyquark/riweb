<div ng-include="'components/navbar/navbar.html'"></div>

<div class="container">
  <span us-spinner spinner-key="purchase-spinner"></span>
  <div class="row">
    <div class="col-xs-12">
      <div>
        <h1>Purchase</h1>
        <p ng-show="message">{{ message }}</p>
        <form name="form" ng-submit="purchaseProduct()" novalidate>
          <div class="row">
            <label class="col-xs-6">Merchant email</label>
            <span class="col-xs-6">
              <input type="email" name="merchantEmail" class="form-control" ng-model="purchase.merchantEmail"
                     required ng-readonly="true" />
            </span>
          </div>
          <div class="row">
            <label class="col-xs-6">Price</label>
            <span class="col-xs-6">
              <input type="text" name="price" class="form-control" ng-model="purchase.price"
                     required ng-readonly="true"/>
            </span>
          </div>
          <div class="row">
            <label class="col-xs-6">Details</label>
            <span class="col-xs-6">
              <input type="text" name="details" class="form-control" ng-model="purchase.details"
                     required ng-readonly="true"/>
            </span>
          </div>
          <div class="row">
            <label class="col-xs-6">Date</label>
            <span class="col-xs-6">
              <input type="text" name="details" class="form-control"
                     required ng-readonly="true" value="{{purchase.timestamp | amDateFormat:'lll'}}">
            </span>
          </div>
          <div class="row" ng-hide="isLoggedIn()">
            <label class="col-xs-6">User email</label>
            <span class="col-xs-6">
              <input type="email" name="email" class="form-control" ng-model="purchase.email" required>
            </span>
          </div>
          <div class="row" ng-hide="isLoggedIn()">
            <label class="col-xs-6">User password</label>
            <span class="col-xs-6">
              <input type="password" name="password" class="form-control" ng-model="purchase.password" required>
            </span>
          </div>
          <div class="form-group has-error">
            <p class="help-block" ng-show="form.email.$error.required && form.password.$error.required && submitted">
              Please enter your email and password.
            </p>
            <p class="help-block" ng-show="form.email.$error.email && submitted">
              Please enter a valid email.
            </p>

            <p class="help-block">{{ errors.other }}</p>
          </div>

          <div class="row">
            <span class="col-xs-6">
              <button class="btn btn-primary btn-lg" type="submit" ng-hide="ro">
                Purchase
              </button>
            </span>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
